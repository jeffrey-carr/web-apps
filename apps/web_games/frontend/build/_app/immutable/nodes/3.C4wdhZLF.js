var ze=Object.defineProperty;var Ce=(g,e,n)=>e in g?ze(g,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):g[e]=n;var _e=(g,e,n)=>Ce(g,typeof e!="symbol"?e+"":e,n);import{t as $,a as h,b as L,c as pe}from"../chunks/xZr1-Uvj.js";import{M as Be,b as Me,N as Re,e as Te,aq as $e,p as ce,a as Ae,s as ve,v as _,x as m,g as r,C as O,w as u,t as D,z as he,y as z,B as j,A as d,q as ge,n as Ee}from"../chunks/C3n9QEEV.js";import{s as J}from"../chunks/3uQZxb5k.js";import{p as N,i as ee,b as Ie}from"../chunks/fOfYy8UT.js";import{a as ye,e as H,i as V,B as U,R as xe,b as Pe,c as Oe,S as Le}from"../chunks/B_ZxHtlc.js";import{a as Se}from"../chunks/B3zbxNUs.js";import{C as Ne,R as be,B as we}from"../chunks/B2gn-wAS.js";import{M as De,m as ke,C as Ge}from"../chunks/B2ig8wVz.js";import{s as je}from"../chunks/CN0GSLX-.js";import"../chunks/CbiwTDX5.js";function He(g,e,n){Be(()=>{var t=Me(()=>e(g,n==null?void 0:n())||{});if(n&&(t!=null&&t.update)){var k=!1,y={};Re(()=>{var p=n();Te(p),k&&$e(y,p)&&(y=p,t.update(p))}),k=!0}if(t!=null&&t.destroy)return()=>t.destroy()})}const fe=(g,e)=>{const n=new ResizeObserver(t=>{for(let k of t){const{height:y,width:p}=k.contentRect;e(y,p)}});n.observe(g),Se(()=>{n.disconnect()})};var Ve=$('<div class="page svelte-x1krfr"><div class="content svelte-x1krfr"><!></div></div>'),Ue=$("<div></div>"),We=$('<div class="container svelte-x1krfr"><div class="page-container svelte-x1krfr"><!> <div class="footer svelte-x1krfr"><!> <!> <!></div></div></div>');function Je(g,e){ce(e,!0);let n=N(e,"open",15),t=N(e,"currentPage",15),k=N(e,"height",3,"60vh"),y=N(e,"width",3,"70vw");Ae(()=>{(t()<0||t()>=e.numPages)&&(console.error(`Page ${t()} is not a valid page number!`),t(0))});const p=()=>{e.allowWrapping?t((t()+1)%e.numPages):t(Math.min(e.numPages-1,t()+1))},b=()=>{e.allowWrapping?(t(t()-1),t()<0&&t(e.numPages-1)):t(Math.max(0,t()-1))};ye(g,{get open(){return n()},set open(P){n(P)},children:(P,v)=>{var x=We(),B=_(x),M=_(B);H(M,17,()=>({length:e.numPages}),V,(s,c,a)=>{var f=Ve(),S=_(f),T=_(S);je(T,()=>e.content,()=>a),u(S),u(f),h(s,f)});var A=m(M,2),C=_(A);const R=O(()=>t()===0);U(C,{size:"small",onclick:b,get disabled(){return r(R)},children:(s,c)=>{xe(s,{icon:"left-arrow"})},$$slots:{default:!0}});var q=m(C,2);H(q,17,()=>({length:e.numPages}),V,(s,c,a)=>{var f=Ue();D(()=>Oe(f,1,`dot ${t()===a?"highlighted":""}`,"svelte-x1krfr")),h(s,f)});var G=m(q,2);const Z=O(()=>t()===e.numPages-1);U(G,{size:"small",onclick:p,get disabled(){return r(Z)},children:(s,c)=>{xe(s,{icon:"right-arrow"})},$$slots:{default:!0}}),u(A),u(B),u(x),D(()=>Pe(x,`--height: ${k()}; --width: ${y()}; --position: ${t()}`)),h(P,x)},$$slots:{default:!0}}),ve()}class Ze{constructor(){_e(this,"items",[])}push(e){this.items.push(e)}pop(){const e=this.size();if(e===0)return null;const n=this.items[e-1];return this.items=this.items.slice(0,e-1),n}size(){return this.items.length}}var Fe=$('<div class="buttons-container svelte-ym6xoj"><!> <!></div>'),Ke=$('<div class="container svelte-ym6xoj"><div class="board-container svelte-ym6xoj"></div> <!></div>');function qe(g,e){ce(e,!0);let n=N(e,"board",15),t=N(e,"style",3,"colors"),k=N(e,"showButtons",3,!0),y=z(void 0),p=z(void 0);const b=(s,c)=>{d(p,Math.min(s,c),!0)};let P=he(new Ze),v=z(!0);const x=(s,c,a)=>{const f=n()[s][c];P.push({row:s,col:c,value:f}),d(v,!1),n(n()[s][c]=a,!0)},B=(s,c)=>e.lockedCells.findIndex(a=>a.row===s&&a.col===c)>=0,M=(s,c)=>{var a,f,S,T;return!!((f=(a=e.hint)==null?void 0:a.rows)!=null&&f.includes(s)||(T=(S=e.hint)==null?void 0:S.cols)!=null&&T.includes(c))},A=()=>{if(P.size()===0)return;const s=P.pop();s!=null&&(P.size()===0&&d(v,!0),n(n()[s.row][s.col]=s.value,!0))},C=()=>{for(;P.size()>0;)A()};var R=Ke(),q=_(R);H(q,21,n,V,(s,c,a)=>{var f=pe(),S=ge(f);H(S,17,()=>r(c),V,(T,E,W)=>{const te=O(()=>B(a,W)),F=O(()=>t()==="numbers"?"var(--gray)":void 0),K=O(()=>t()==="numbers"?"var(--gray)":void 0),re=O(()=>M(a,W));Ne(T,{get value(){return n()[a][W]},updateValue:x,coord:{row:a,col:W},get locked(){return r(te)},get zeroColor(){return r(F)},get oneColor(){return r(K)},get isHint(){return r(re)},children:(se,me)=>{var oe=pe(),ne=ge(oe);{var ue=Q=>{var ae=L();D(()=>J(ae,r(E))),h(Q,ae)};ee(ne,Q=>{t()==="numbers"&&r(E)>=0&&Q(ue)})}h(se,oe)},$$slots:{default:!0}})}),h(s,f)}),u(q);var G=m(q,2);{var Z=s=>{var c=Fe(),a=_(c);U(a,{onclick:A,size:"medium",type:"secondary",get disabled(){return r(v)},children:(S,T)=>{j();var E=L("Undo last move");h(S,E)},$$slots:{default:!0}});var f=m(a,2);U(f,{onclick:C,size:"medium",type:"secondary",get disabled(){return r(v)},children:(S,T)=>{j();var E=L("Reset board");h(S,E)},$$slots:{default:!0}}),u(c),h(s,c)};ee(G,s=>{k()&&s(Z)})}u(R),Ie(R,s=>d(y,s),()=>r(y)),He(R,(s,c)=>fe==null?void 0:fe(s,c),()=>b),D(()=>Pe(q,`--board-size: ${n().length}; --board-container-size: ${r(p)}px`)),h(g,R),ve()}var Qe=$('<h1 class="title"> </h1> <p class="instruction svelte-1e1a1ek"> </p> <div class="board-container svelte-1e1a1ek"><!></div>',1);function Xe(g,e){ce(e,!0);const n=(v,x=Ee)=>{var B=Qe(),M=ge(B),A=_(M);u(M);var C=m(M,2),R=_(C,!0);u(C);var q=m(C,2),G=_(q);qe(G,{get board(){return b[x()]},get hint(){return P[x()]},lockedCells:y,showButtons:!1}),u(q),D(()=>{J(A,`Rule ${x()+1}`),J(R,p[x()])}),h(v,B)};let t=N(e,"open",15),k=z(0);const y=[];for(let v=0;v<6;v++)for(let x=0;x<6;x++)y.push({row:v,col:x});const p=["There must be an equal number of types of tiles in each row and column","There cannot be more than 2 consecutive tile types next to each other in each row and column","There cannot be any identical rows or any identical columns"],b=[[[1,1,0,0,1,0],[0,0,1,1,0,1],[1,0,1,0,1,1],[0,1,0,1,1,0],[1,1,0,0,1,0],[0,0,1,1,0,1]],[[1,1,1,0,0,1],[0,0,0,1,1,0],[1,1,0,0,1,1],[0,0,1,1,0,0],[1,1,0,0,1,1],[0,0,1,1,0,0]],[[1,0,1,0,1,0],[1,0,1,0,1,0],[0,1,0,1,0,1],[0,1,0,1,0,1],[1,0,1,0,1,0],[0,1,0,1,0,1]]],P=[{rows:[2],cols:[4]},{rows:[0],cols:[]},{rows:[0,1],cols:[1,3]}];Je(g,{content:n,get numPages(){return p.length},get open(){return t()},set open(v){t(v)},get currentPage(){return r(k)},set currentPage(v){d(k,v,!0)}}),ve()}var Ye=$('<div class="correct-message svelte-16qxofu"><h1 class="svelte-16qxofu">Correct!</h1> <p>Would you like to play again?</p> <div class="buttons-container svelte-16qxofu"></div> <!></div>'),et=$('<p class="message svelte-16qxofu"> </p>'),tt=$('<div class="loading-container svelte-16qxofu"><div class="spinner-container svelte-16qxofu"><!></div> <div class="loading-text svelte-16qxofu"></div></div>'),rt=$('<main class="container svelte-16qxofu"><!> <!> <!> <!> <div class="header svelte-16qxofu"><h1 class="title svelte-16qxofu">Binoku</h1></div> <div class="buttons-container svelte-16qxofu"><div class="new-game-container svelte-16qxofu"><div class="title svelte-16qxofu"><p>Start a new game</p></div> <div class="buttons svelte-16qxofu"></div></div> <!> <!></div> <div class="board-container svelte-16qxofu"><!></div></main>');function ht(g,e){ce(e,!0);const n=3500;let t=z(void 0),k=z(void 0);const y=o=>{clearTimeout(r(k)),d(t,o,!0),d(k,setTimeout(()=>{d(t,void 0)},n),!0)},p=[4,6,8,10];let b=z(he([])),P=z(he([])),v=z(0),x=O(()=>r(v)>0),B=z(void 0);const M=["Generating puzzle...","This is taking a while, sorry","Did you know Binoku was invented in 1200 B.C.?","I made that up, sorry. I don't know when Binoku was invented","Really sorry for the wait. Maybe it crashed?"],A=5e3;let C=z(!1),R=O(()=>r(b).length>0&&!r(b).some(o=>o.some(i=>i<0)));const q=async o=>{d(b,[],!0),d(a,!1),d(v,1),d(B,setInterval(()=>{d(v,Math.min(M.length,r(v)+1),!0)},A),!0);const i=await ke(be.NEW_GAME,{query:{size:o}});if(i.status!==200){console.error("error getting game",i);return}d(b,await i.json(),!0),d(P,G(r(b)),!0),clearInterval(r(B)),d(v,0)},G=o=>{const i=[];for(let l=0;l<o.length;l++)for(let w=0;w<o.length;w++)o[l][w]>=0&&i.push({row:l,col:w});return i},Z=async()=>{d(C,!0);const o=JSON.parse(JSON.stringify(r(b))),i=await ke(be.VALIDATE_GUESS,{body:{board:o}});if(i.status!==200){console.error(`[${i.status}] error validating guess`);return}const l=await i.json();return l.valid?d(a,!0):l.hint&&y(l.hint),d(C,!1),!0};let s=z(!1);const c=()=>{d(s,!r(s))};let a=z(!1);Se(()=>{clearInterval(r(B))});var f=rt(),S=_(f);Xe(S,{get open(){return r(s)},set open(o){d(s,o,!0)}});var T=m(S,2);ye(T,{get open(){return r(a)},set open(o){d(a,o,!0)},children:(o,i)=>{var l=Ye(),w=m(_(l),4);H(w,21,()=>p,V,(X,ie)=>{we(X,{onclick:()=>q(r(ie)),children:(Y,le)=>{j();var de=L();D(()=>J(de,r(ie))),h(Y,de)}})}),u(w);var I=m(w,2);U(I,{size:"medium",onclick:()=>{d(a,!1)},children:(X,ie)=>{j();var Y=L("View board");h(X,Y)},$$slots:{default:!0}}),u(l),h(o,l)},$$slots:{default:!0}});var E=m(T,2);{var W=o=>{Ge(o,{})};ee(E,o=>{r(a)&&o(W)})}var te=m(E,2);De(te,{});var F=m(te,4),K=_(F),re=m(_(K),2);H(re,21,()=>p,V,(o,i)=>{we(o,{onclick:()=>q(r(i)),children:(l,w)=>{j();var I=L();D(()=>J(I,r(i))),h(l,I)}})}),u(re),u(K);var se=m(K,2);const me=O(()=>!r(R));U(se,{size:"medium",onclick:Z,get disabled(){return r(me)},get loading(){return r(C)},children:(o,i)=>{j();var l=L("Check Solution");h(o,l)},$$slots:{default:!0}});var oe=m(se,2);U(oe,{size:"medium",type:"secondary",onclick:c,children:(o,i)=>{j();var l=L("How To Play");h(o,l)},$$slots:{default:!0}}),u(F);var ne=m(F,2),ue=_(ne);{var Q=o=>{var i=tt(),l=_(i),w=_(l);Le(w,{}),u(l);var I=m(l,2);H(I,21,()=>({length:r(v)}),V,(X,ie,Y)=>{var le=et(),de=_(le,!0);u(le),D(()=>J(de,M[Y])),h(X,le)}),u(I),u(i),h(o,i)},ae=(o,i)=>{{var l=w=>{qe(w,{get lockedCells(){return r(P)},get hint(){return r(t)},get board(){return r(b)},set board(I){d(b,I,!0)}})};ee(o,w=>{r(b).length>0&&w(l)},i)}};ee(ue,o=>{r(x)?o(Q):o(ae,!1)})}u(ne),u(f),h(g,f),ve()}export{ht as component};
